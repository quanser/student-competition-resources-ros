<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Running Nav 2 on the Virtual QCar 2</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="color-scheme" content="light dark">
        <link rel="stylesheet" href="../../../pages/assets/style.css">
    </head>
    <body>
        <header class="site-header">
            <div class="header-inner">
                <div class="header-left">
                    
                </div>

                <div class="header-middle">
                    <h1>Quanser Student Competitions</h1>
                </div>

                <div class="header-right">
                    <img src="../../../pages/assets/logos/full colour_dark background_tagline.png" alt="Quanser Student Competitions logo" class="site-logo">
                </div>
            </div>
            <div class="header-banner">
                <img src="../../../pages/assets/banners/quanser_banner.jpg" alt="Competition banner" class="header-banner-img">
            </div>
        </header>

        <main class="content">
            <h1 id="running-nav-2-on-the-virtual-qcar-2">Running Nav 2 on the Virtual QCar 2 <!-- omit in toc --></h1>
<p>This guide will cover the commands and procedure for running the Nav 2 ROS package and setting a goal pose for the QCar 2.</p>
<ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#setting-the-goal-pose-for-the-qcar-2">Setting the Goal Pose for the QCar 2</a></li>
</ul>
<h2 id="setup">Setup</h2>
<p>Make sure that you have gone through the entire <a href="./Virtual_ROS_Software_Setup.html">ACC Software Setup Instructions</a> before continuing with this guide.</p>
<ol>
<li>Open QLabs to the Plane World.</li>
<li>
<p>Open a new terminal (<code>CTRL + ALT + T</code>) and run the Quanser Virtual Environment Container.</p>
<p><code>bash
cd /home/$USER/Documents/ACC_Development/docker/virtual_qcar2
sudo docker run --rm -it --network host --name virtual-qcar2 quanser/virtual-qcar2 bash</code></p>
</li>
<li>
<p>Spawn the QCar in the competition environment by running the following commands in the Quanser Virtual Environment Container:</p>
<p><code>bash
cd /home/qcar2_scripts/python
python3 Base_Scenarios_Python/Setup_Competition_Map.py</code></p>
</li>
<li>
<p>Open a new terminal and start the Development Container in it.</p>
<p><code>bash
cd /home/$USER/Documents/ACC_Development/isaac_ros_common
./scripts/run_dev.sh  /home/$USER/Documents/ACC_Development/Development</code></p>
</li>
<li>
<p>Build and source the nodes in ROS2.</p>
<p><code>bash
colcon build &amp;&amp; . install/setup.bash</code></p>
</li>
<li>
<p>Run the Nav2 launch file.</p>
<p><code>bash
ros2 launch qcar2_nodes qcar2_slam_and_nav_bringup_virtual_launch.py</code></p>
</li>
<li>
<p>Open a new terminal and attach the terminal to the Development Container.</p>
<p><code>bash
cd /home/$USER/Documents/ACC_Development/isaac_ros_common
./scripts/run_dev.sh  /home/$USER/Documents/ACC_Development/Development</code></p>
</li>
<li>
<p>Open <code>rviz2</code>.</p>
<p><code>bash
rviz2</code></p>
</li>
<li>
<p>Add the following topics to the Display. Click on <code>add</code> in the bottom left of <code>rviz2</code>.</p>
<ul>
<li><code>TF</code> will be under <code>By display type</code>.</li>
<li><code>LaserScan</code> and <code>Map</code> will be under <code>By topic</code>.</li>
</ul>
<p><code>bash
Display
    L TF
    L LaserScan
    L Map</code></p>
</li>
</ol>
<p><img alt="Rviz2PictureofAddingTopicstoDisplay" src="../Pictures/rviz2AddingTopics.png"/></p>
<h2 id="setting-the-goal-pose-for-the-qcar-2">Setting the Goal Pose for the QCar 2</h2>
<ol>
<li>
<p>In <code>rviz2</code> select the <code>2D Goal Pose</code>.</p>
<p><img alt="Selecting2DGoalPose" src="../Pictures/rviz2SetPoseButton.png"/></p>
</li>
<li>
<p>Click and drag within the gridded area to set the goal pose and orientation. A green arrow should appear and show your selection.</p>
</li>
</ol>
<p>If you navigate back to QLabs, you should see that the QCar 2 has begun moving towards the goal location.</p>
        </main>

        <footer class="site-footer">
            <p>&copy; 2025 Quanser. All Rights Reserved. </p>
        </footer>
    </body>
</html>
